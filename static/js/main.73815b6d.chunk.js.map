{"version":3,"sources":["Recorder.js","Auth/Fields.js","Register.js","Login.js","Landing.js","Assess.js","Companion.js","Diary.js","App.js","index.js"],"names":["socket","recorder","text","setText","a","console","log","fetch","process","response","json","data","error","alert","token","WebSocket","texts","onmessage","message","msg","res","JSON","parse","dir","audio_start","keys","Object","sort","b","key","onerror","event","close","onclose","onopen","navigator","mediaDevices","getUserMedia","audio","then","stream","RecordRTC","type","mimeType","recorderType","StereoAudioRecorder","timeSlice","desiredSampRate","numberOfAudioChannels","bufferSize","audioBitsPerSecond","ondataavailable","blob","reader","FileReader","onload","base64data","result","send","stringify","audio_data","split","readAsDataURL","startRecording","catch","err","terminate_session","pauseRecording","Recorder","props","useState","isRecording","setRecording","Button","size","className","variant","onClick","stopRecording","UsernameField","Form","Group","controlId","Control","placeholder","label","PasswordField","GenericField","value","RecordableTextField","onChange","e","setValue","target","onKeyPress","Register","history","useHistory","isLoading","setLoading","preventDefault","form","firstName","elements","formFirstName","lastName","formLastName","email","formUsername","password","formPassword","reqBody","logs","method","headers","body","resBody","window","setUser","user","push","onSubmit","disabled","Login","Landing","steps","style","transform","duration","Assess","isSaved","setSaved","mood","setMood","setMessage","handleSubmit","_id","MoodChooser","MoodButton","currentMood","active","Companion","messages","setMessages","setBotMessage","getBotResponse","userInput","handleSubmitMessage","bot","saveConversation","id","url","map","Diary","setLogs","useEffect","index","DiaryEntry","length","justifyContent","alignItems","conversations","conversation","display","minWidth","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.73815b6d.chunk.js","sourcesContent":["import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './App.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport RecordRTC, { StereoAudioRecorder } from 'recordrtc';\n\nlet isRecording = false;\nlet socket;\nlet recorder;\n\nasync function startRecording(text, setText) {\n  console.log('start recording');\n  \n  const response = await fetch(`${process.env.REACT_APP_API_URL}/assemblyai`); // get temp session token from server.js (backend)\n  const data = await response.json();\n\n  if (data.error) {\n    alert(data.error)\n  }\n\n  const { token } = data;\n\n  // establish wss with AssemblyAI (AAI) at 16000 sample rate\n  socket = await new WebSocket(`wss://api.assemblyai.com/v2/realtime/ws?sample_rate=16000&token=${token}`);\n\n  // handle incoming messages to display transcription to the DOM\n  const texts = {};\n  socket.onmessage = (message) => {\n    let msg = text;\n    const res = JSON.parse(message.data);\n    console.dir(res);\n    texts[res.audio_start] = res.text;\n    console.dir(texts);\n    const keys = Object.keys(texts);\n    keys.sort((a, b) => a - b);\n    for (const key of keys) {\n      if (texts[key]) {\n        msg += ` ${texts[key]}`;\n      }\n    }\n    setText(msg);\n  };\n\n  socket.onerror = (event) => {\n    console.error(event);\n    socket.close();\n  }\n\n  socket.onclose = event => {\n    console.log(event);\n    socket = null;\n  }\n\n  socket.onopen = () => {\n    // once socket is open, begin recording\n    navigator.mediaDevices.getUserMedia({ audio: true })\n      .then((stream) => {\n        recorder = new RecordRTC(stream, {\n          type: 'audio',\n          mimeType: 'audio/webm;codecs=pcm', // endpoint requires 16bit PCM audio\n          recorderType: StereoAudioRecorder,\n          timeSlice: 250, // set 250 ms intervals of data that sends to AAI\n          desiredSampRate: 16000,\n          numberOfAudioChannels: 1, // real-time requires only one channel\n          bufferSize: 4096,\n          audioBitsPerSecond: 128000,\n          ondataavailable: (blob) => {\n            const reader = new FileReader();\n            reader.onload = () => {\n              const base64data = reader.result;\n\n              // audio data must be sent as a base64 encoded string\n              if (socket) {\n                socket.send(JSON.stringify({ audio_data: base64data.split('base64,')[1] }));\n              }\n            };\n            reader.readAsDataURL(blob);\n          },\n        });\n\n        recorder.startRecording();\n      })\n      .catch((err) => console.error(err));\n  };\n}\n\nasync function stopRecording() {\n  console.log('stop recording');\n  \n  if (socket) {\n    socket.send(JSON.stringify({terminate_session: true}));\n    socket.close();\n    socket = null;\n  }\n\n  if (recorder) {\n    recorder.pauseRecording();\n    recorder = null;\n  }\n}\n\nexport default function Recorder(props) {\n  const [isRecording, setRecording] = useState(false);\n  function handleClick() {\n    if (isRecording) stopRecording();\n    else startRecording(props.text, props.setText);\n    setRecording(!isRecording);\n  }\n  return (\n    <Button size='sm' className='record-button' variant='outline-danger' onClick={handleClick}>\n      {isRecording ? 'Stop' : 'Record'}\n    </Button>\n  );\n}\n","import Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\nimport Recorder from '../Recorder';\n\nexport function UsernameField(props) {\n  return (\n    <Form.Group className='mb-2' controlId={props.controlId ?? 'formUsername'}>\n      <Form.Control type='email' placeholder={props.label ?? 'Email address'}/>\n    </Form.Group>\n  );\n}\n\nexport function PasswordField(props) {\n  return (\n    <Form.Group className='mb-2' controlId={props.controlId ?? 'formPassword'}>\n      <Form.Control type='password' placeholder={props.label ?? 'Password'}/>\n    </Form.Group>\n  );\n}\n\nexport function GenericField(props){\n  return (\n    <Form.Group className='mb-2' controlId={props.controlId}>\n      <Form.Control type='text' placeholder={props.label} value={props.value}/>\n    </Form.Group>\n  );\n}\n\nexport function RecordableTextField(props) {\n  return (\n    <Form.Group className='mb-2 flex-row' controlId={props.controlId}>\n      <Form.Control type='text' placeholder={props.label} value={props.value} onChange={e => props.setValue(e.target.value)} onKeyPress={props.onKeyPress}/>\n      <Recorder text={props.value} setText={props.setValue}/>\n    </Form.Group>\n  );\n}\n","import { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport './App.css';\nimport './Register.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\nimport { UsernameField, PasswordField, GenericField } from './Auth/Fields';\n\nconst Register = (props) => {\n  const history = useHistory();\n  const [isLoading, setLoading] = useState(false);\n  \n  async function handleSubmit(event) {\n    event.preventDefault();\n    if (isLoading) return;\n    setLoading(true);\n    \n    const form = event.target;\n    const firstName = form.elements.formFirstName.value;\n    const lastName = form.elements.formLastName.value;\n    const email = form.elements.formUsername.value;\n    const password = form.elements.formPassword.value;\n    // TODO: Validate re-entered password\n    \n    const reqBody = { firstName, lastName, email, password, logs: [] };\n    try {\n      const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/users`,\n        {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(reqBody)\n        }\n      );\n      \n      const resBody = await response.json();\n      console.dir(resBody);\n    \n      if (resBody.error) {\n        window.alert(\"Couldn't create the account\");\n      } else {\n        props.setUser(resBody.user);\n        history.push('/assess');\n      }\n    \n    } catch (error) {\n      console.log(error);\n      window.alert('Failed to contact server :(');\n    }\n    \n    setLoading(false);\n  }\n  \n  return (\n    <div className=\"reg-container align-center\">\n      <h1>Register</h1>\n      <Form className='reg width-30' onSubmit={handleSubmit}>\n        <GenericField controlId=\"formFirstName\" label=\"First name\"/>\n        <GenericField controlId=\"formLastName\" label=\"Last name\"/>\n        <UsernameField/>\n        <PasswordField/>\n        <PasswordField controlId=\"formConfirmPassword\" label=\"Re-enter password\"/>\n        <Button className='fullwidth' variant=\"primary\" disabled={isLoading} type=\"submit\">\n          {!isLoading ? 'Register' : 'Registering…'}\n        </Button>\n        <div className='login-link-container'>\n          <Button className='fullwidth' variant='primary' onClick={() => history.push('/login')}>Log into existing account</Button>\n        </div>\n      </Form>\n    </div>\n  );\n}\n\nexport default Register\n","import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './App.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\n\nimport { UsernameField, PasswordField } from './Auth/Fields';\n\nexport default function Login(props) {\n  const history = useHistory();\n  const [isLoading, setLoading] = useState(false);\n  \n  async function handleSubmit(event) {\n    event.preventDefault();\n    if (isLoading) return;\n    setLoading(true);\n    \n    const form = event.target;\n    const email = form.elements.formUsername.value;\n    const password = form.elements.formPassword.value;\n    \n    const reqBody = { email, password };\n    console.dir(reqBody);\n\n    try {\n      console.log(`${process.env.REACT_APP_API_URL}/validate`);\n      const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/validate`,\n        {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(reqBody)\n        }\n      );\n      \n      const resBody = await response.json();\n      console.dir(resBody);\n    \n      if (resBody.data) {\n        props.setUser(resBody.data);\n        history.push('/assess');\n      } else {\n        window.alert('Invalid email or password, please try again');\n      }\n    } catch (error) {\n      console.log(error);\n      window.alert('Failed to contact server :(');\n    }\n    \n    setLoading(false);\n  }\n  \n  return (\n    <div className='align-center'>\n      <h1>Log in</h1>\n      <Form className='width-30' onSubmit={handleSubmit}>\n        <UsernameField/>\n        <PasswordField/>\n        <Button className='fullwidth' variant=\"primary\" disabled={isLoading} type=\"submit\">\n          {!isLoading ? 'Log in' : 'Logging in…'}\n        </Button>\n      </Form>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './App.css';\nimport './Landing.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Animate from 'react-smooth';\n\nexport default function Landing() {\n  const history = useHistory();\n  \n  const appearTransitionSteps = [\n    {\n      style: {\n        transform: 'translate(0,-500px)',\n      },\n      duration: 0\n    },\n    {\n      style: {\n        transform: 'translate(0,0)'\n      },\n      duration: 800\n    }\n  ];\n  \n  return <Animate steps={appearTransitionSteps}>\n      <div className='align-center'>\n        <h1>Companion</h1>\n        <h2>your mindfulness buddy</h2>\n        <Button className='wide get-started' size='lg' variant='primary' onClick={() => history.push('/register')}>Get Started</Button>\n      </div>\n  </Animate>;\n}\n","import { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './App.css';\nimport './Assess.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\nimport { GenericField, RecordableTextField } from './Auth/Fields';\n\nexport default function Assess(props) {\n  const history = useHistory();\n  const [isLoading, setLoading] = useState(false);\n  const [isSaved, setSaved] = useState(false);\n  \n  const [mood, setMood] = useState(null);\n  const [message, setMessage] = useState('');\n  \n  async function handleSubmit(event) {\n    event.preventDefault();\n    if (isLoading) return;\n    setLoading(true);\n    \n    const reqBody = { mood, message };\n    try {\n      const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/${props.user._id}/logs`,\n        {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(reqBody)\n        }\n      );\n      \n      const resBody = await response.json();\n      console.dir(resBody);\n    \n      if (resBody.error) {\n        console.dir(resBody.error);\n        window.alert(\"Couldn't save, please try again\");\n      } else {\n        setSaved(true);\n      }\n    \n    } catch (error) {\n      console.dir(error);\n      window.alert('Failed to contact server :(');\n    }\n    \n    setLoading(false);\n  }\n  \n  function handleMyDiary() {\n    history.push('/diary')\n  }\n  function handleTalkToSomeone() {\n    history.push('/companion');\n  }\n  \n  return (\n    <div className='align-center flex-column gap-4'>\n      <h1>Welcome back, {props.user.firstName}</h1>\n      <h2>How are you feeling today?</h2>\n      <MoodChooser mood={mood} setMood={setMood}/>\n      <Form className='width-50' onSubmit={handleSubmit}>\n        <RecordableTextField controlId='formMessage' label='Describe your day…' value={message} setValue={setMessage}/>\n        <div className='align-center flex-column'>\n          <Button className='fullwidth' variant='success' onClick={handleSubmit} disabled={!mood || isLoading || isSaved}>\n            {isLoading ? 'Saving…' : !isSaved ? 'Save' : 'Entry saved'}\n          </Button>\n          <div className='fullwidth flex-row gap-2'>\n            <Button className='fullwidth' variant='primary' onClick={handleMyDiary}>My diary</Button>\n            <Button className='fullwidth' variant='primary' onClick={handleTalkToSomeone}>Talk to someone</Button>\n          </div>\n        </div>\n      </Form>\n    </div>\n  );\n}\n\nfunction MoodChooser(props) {\n  \n  return (\n    <div className='mood-chooser'>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='☺️'/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='😄'/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='😀'/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='🙂'/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='😐'/>\n      <hr/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='😕'/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='☹️'/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='😔'/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='😥'/>\n      <MoodButton currentMood={props.mood} setMood={props.setMood} mood='😭'/>\n    </div>\n  );\n}\n\nfunction MoodButton(props) {\n  return (\n    <Button size='sm' variant='primary' className={'mood-button '} active={props.currentMood == props.mood} onClick={() => props.setMood(props.mood)}>{props.mood}</Button>\n  );\n}\n","import React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport './Companion.css'\nimport { RecordableTextField } from './Auth/Fields';\nimport axios from 'axios';\n\nconst Companion = (props) => {\n    const [messages, setMessages] = useState([]);\n    const [message, setMessage] = useState('');\n    const [botMessage, setBotMessage] = useState('');\n    \n    const getBotResponse = async (userInput) => {\n        const url = \"https://companion-api-htv5.herokuapp.com/api/v1/12345678\";\n        const res = await fetch(\n            url,\n            {\n              method: 'POST',\n              headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({message: userInput})\n            }\n          );\n        const resBody = await res.json();\n        setBotMessage(resBody);\n\n        return resBody.message;\n    };\n\n    const handleSubmitMessage = async () => {\n        messages.push({user: message});\n        setMessages(messages);\n        const msg = message;\n        setMessage('');\n\n        // get response from bot\n        var data = await getBotResponse(msg);\n        if (data === '') data = \"Can you rephrase that? I don't seem to understand\";\n        messages.push({bot: data});\n        setMessages(messages);\n\n        setBotMessage('');\n    };\n\n    const saveConversation = async () => {\n        const baseUrl = \"https://companion-htv5.herokuapp.com/api/v1/\";\n        const id = props.user._id;\n        const endUrl = '/logs/conversations';\n\n        const url = baseUrl + id + endUrl;\n        console.log(url);\n        const res = await fetch(\n            url,\n            {\n              method: 'PATCH',\n              headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({messages: messages})\n            }\n          );\n        const resBody = await res.json();\n        console.log(resBody);\n    };\n\n    return (\n        <div>\n            <h1>Companion</h1>\n            <div className=\"messages-view-container\">\n                <div className=\"messages-view\">\n                    <div className=\"message\">\n                        {\n                            messages.map(msg => {\n                                return(\n                                    <div>\n                                        {msg.user ? <div className=\"user-message\">You: {msg.user}</div> : <div className=\"bot-message\">Bot: {msg.bot}</div>}\n                                    </div>\n                                );\n                            })\n                        }\n                    </div>\n                </div>\n            </div>\n\n            <RecordableTextField className=\"message-input\" controlId='formMessage' label='Type Message Here' value={message} setValue={setMessage} onKeyPress={(e) => e.key === 'Enter' && handleSubmitMessage()}/>\n            <Button onClick={saveConversation}>Save Conversation</Button>\n        </div>\n    );\n}\n\nexport default Companion;\n","import { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './App.css';\nimport './Diary.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\nexport default function Diary(props) {\n  const history = useHistory();\n  const [isLoading, setLoading] = useState(false);\n  \n  const [logs, setLogs] = useState(null);\n  \n  useEffect(async () => {\n    setLoading(true);\n    \n    try {\n      const response = await fetch(\n        `${process.env.REACT_APP_API_URL}/${props.user._id}/logs`,\n        {\n          method: 'GET',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n      \n      const resBody = await response.json();\n      console.dir(resBody);\n    \n      if (resBody.error) {\n        console.dir(resBody.error);\n        window.alert(\"Couldn't retrieve entries, please try again\");\n      } else {\n        setLogs(resBody.logs);\n      }\n    \n    } catch (error) {\n      console.dir(error);\n      window.alert('Failed to contact server :(');\n    }\n    \n    setLoading(false);\n  }, [props.user]);\n\n  function handleGoBack() {\n    history.push('/assess');\n  }\n  \n  return (\n    <div className='width-60 flex-column gap-4'>\n      <h1>My diary</h1>\n      <ul className='fullwidth diary-container'>\n        {\n          logs && logs.map((log, index) => {\n            return <>\n              <li key={`log-entry-${index}`}>\n                <DiaryEntry log={log} index={index}/>\n              </li>\n              {index !== logs.length - 1 && <hr/>}\n            </>;\n          })\n        }\n      </ul>\n      <div className='fullwidth flex-row gap-2'>\n        <Button className='fullwidth' variant='primary' onClick={handleGoBack}>Go Back</Button>\n      </div>\n    </div>\n  );\n}\n\nfunction DiaryEntry(props) {\n  return (\n    <div className='flex-row' style={{justifyContent: 'flex-start'}}>\n      <p className='align-left mood'>{props.log.mood}</p>\n      <div className='flex-column' style={{alignItems: 'flex-start'}}>\n        <p className='align-left message'>{props.log.message}</p>\n        <ul>\n          {\n            props.log.conversations && props.log.conversations.map((conversation, index) => {\n              return <>\n                <li key={`log-entry-${props.index}-conversation-${index}`}>\n                  <details>\n                    <summary className='align-left conversation'>\n                      Conversation #{index + 1}\n                    </summary>\n                    <p className='align-left conversation'>\n                      {conversation.map(msg => {\n                        return <>\n                          {msg.user && <span className='align-left' style={{display: 'inline-block', minWidth: '150px'}}>You: </span>}\n                          {msg.bot && <span className='align-left' style={{display: 'inline-block', minWidth: '150px'}}>Companion: </span>}\n                          {msg.user ?? msg.bot}\n                          {index !== conversation.length - 1 && <br/>}\n                        </>;\n                      })}\n                    </p>\n                  </details>\n                </li>\n              </>;\n            })\n          }\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport './App.css';\nimport Register from './Register';\nimport Login from './Login';\nimport Landing from './Landing';\nimport Assess from './Assess';\nimport Companion from './Companion';\nimport Diary from './Diary';\n\nfunction App() {\n  const [user, setUser] = useState({\n    _id: '616b918b2749f77e074616ac',\n    email: 'demo@demo.user',\n    firstName: 'Demo',\n    lastName: 'User',\n    password: 'password',\n    logs: []\n  });\n  \n  return (\n    <div className=\"App flex-column\">\n      <Router>\n        <Switch>\n          <Route exact path='/'>\n            <Landing/>\n          </Route>\n          <Route exact path='/login'>\n            <Login setUser={setUser}/>\n          </Route>\n          <Route exact path='/register'>\n            <Register setUser={setUser}/>\n          </Route>\n          <Route exact path='/assess'>\n            <Assess user={user}/>\n          </Route>\n          <Route exact path='/companion'>\n            <Companion user={user}/>\n          </Route>\n          <Route exact path='/diary'>\n            <Diary user={user}/>\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}